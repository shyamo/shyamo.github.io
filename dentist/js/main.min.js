var app={init:function(){app.keyEvents(),app.events()},events:function(){$(".text").focus(),$(".search").on("click",function(){$(".load").hide(),app.callApi($(".text").val())}),$("#show-map").on("click",function(){app.updateMap()}),$(".js-dentist a.link-list").on("click",function(){console.log(1),$("html, body").animate({scrollTop:$(document).height()},"fast")})},updateMap:function(a,b){var e={center:{lat:55.3781,lng:3.436},zoom:16},f=new google.maps.Geocoder;f.geocode({address:a},function(a,b){if(b==google.maps.GeocoderStatus.OK){new google.maps.Marker({position:a[0].geometry.location,map:g});g.setCenter(a[0].geometry.location)}});var g=new google.maps.Map(document.getElementById("map-canvas"),e)},keyEvents:function(){$(".text").keypress(function(a){var b=a.which;if(13==b)return $("input[name = search]").click(),!1})},callApi:function(a){var b;$.getJSON("http://data.gov.uk/data/api/service/health/dental_practices/partial_postcode?partial_postcode="+a+"&callback=?",function(a){b=a;for(var d=(Object.keys(a).length,""),e="</div></a><!--/js-card--></a></div><!--/col-md-4-->",g="",h=0;h<5;h++){try{googleMapsAddress=b.result[h].address_line_2+" "+b.result[h].postcode,g=googleMapsAddress,googleMapsAddress=googleMapsAddress.split(" ").join("+").toLowerCase(),d+="<div class='col-md-12'><a href='#' id='link"+h+"' class='btn-viewonmap link-list ",0==h&&(d+=" active"),d+="' data-address='"+googleMapsAddress+"'><div class='js-card'>",d+="<div class='name'>"+app.capitalize(b.result[h].name)+"</div>",b.result[h].address_line_2&&(d+="<div class='contact address_line_2'>"+app.capitalize(b.result[h].address_line_2)),d+="<div class='contact postcode'>"+b.result[h].postcode+"</div></div>",d+=e}catch(a){console.log("Error:",a)}$(".js-dentist").html(d),0==h&&app.updateMap(b.result[0].address_line_2+" "+b.result[0].postcode,0);var i=$("#entry-template").html();Handlebars.compile(i)}$(".btn-viewonmap").on("click",function(a){a.preventDefault(),app.updateMap($(this).data("address"),h),$(".link-list").removeClass("active"),$(this).addClass("active")})})},capitalize:function(a){return a=a.toLowerCase()}};$(document).ready(function(){app.init()});
